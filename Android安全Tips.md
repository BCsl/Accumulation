# Security Tips

## 数据存储
### 内部存储
  默认情况下，在内部存储创建的文件只有自己的应用可以访问。Android的这种保护措施对大部分应用来说是足够的。
  避免使用对IPC文件使用` MODE_WORLD_WRITEABLE`或者`MODE_WORLD_READABLE`模式，因为这样不能限制个别应用的访问权限，
  并对数据格式不作控制。如果一定要和其他应用共享数据，使用`ContentProvider`，对其他应用提供读写的权限和也可以动态地提供权限
  为了提供额外的保护，选择一个不是直接从本应用获取到的`key`来加密本地文件。例如，这个`key`可以存在`keystore`来保护用户密码，
  而不是保存在设备上。然而在在具有root权限可以监视用户输入的密码的情况下，这种方式无法保护数据，但是可以为未进行文件系统加密的已丢失的设备提供保护。

### 外部存储
  默认情况下，在外部存储创建的文件可以全局访问。
### ContentProvider
  `ContentProvider`提供结构存储机制可以限制自己的应用和对外的访问权限。如果不想其他应用访问，在清单文件为具体`contentProvider`组件添加`android:exported=false `即可。
  要建立一个给其他应用使用的`ContentProvider`，你可以为读写操作指定一个单一的权限，或者在清单文件中为读写操作指定确切的权限。
  如果只是在应用内共享数据，一般使用`android:protectionLevel`属性并设置为`signature`来做保护。`signature`权限不需要用户确认，所以在使用相同的签名的时候可以
  提供更好的用户体验也更好地控制`ContentProvider`访问数据。
  `ContentProvider`也可以通过声明`android:grantUriPermissions`并在触发组件的Intent对象中使用FLAG_GRANT_READ_URI_PERMISSION和FLAG_GRANT_WRITE_URI_PERMISSION标志提供更小粒度的访问。这些权限的作用域可以通过`<grant-uri-permission/>`标签进一步限制。 当访问一个ContentProvider时，使用参数化的查询方法，比如`query()`,`update()`,和`delete()`来避免来自不信任源潜在的SQL注入。 注意，如果提交方法之前的selection是通过连接用户数据建立的，使用参数化的方法是不够的。
  不要对“写”权限有一个虚假的安全感。 考虑“写”权限允许sql语句，使得部分数据使用创造性的WHERE语句并且解析结果变为可能。 例如：入侵者可能在通话记录中通过修改一条记录来检测某个特定存在的电话号码，只要那个电话号码已经存在。 如果`ContentProvider`数据有可预见的结构，提供“写”权限也许等同于同时提供了“读写”权限。

## 使用权限
### 请求权限
  建议最小化应用请求的权限数量，不具有访问敏感资料的权限可以减少无意中滥用这些权限的风险，可以增加用户接受度，并且减少应用可被攻击者攻击利用。
  如果你的应用可以设计成不需要任何许可，那最好不过。例如：与其请求访问设备信息来建立一个标识，不如建立一个GUID（UUID）标识。与其写文件到外存储设备不如写到
  内存储设备。

### 创建权限

## 使用网络
### 使用IP网络
### 使用手机网络
