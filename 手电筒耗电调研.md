# 耗电问题调研

## 进程

- 主进程
- ScreenLocker
- InteelligentPreloadService
- process2
- pushservice

## CPU占用

### 亮屏，后台运行

如果是前台运行，需要占用相机资源，耗电上肯定会明显提高

关闭退出应用后的应用切换检测、屏蔽掉统计、商业化SDK，电量消耗下降明显

#### 去掉应用切换检测、屏蔽掉统计、商业化SDK（后台运行）

半小时亮屏：18.4J，0.6%

半小时暗屏幕：22.5J，4.8%

#### 没去掉应用切换检测、屏蔽掉统计、商业化SDK（后台运行）

读取应用使用情况的权限是否有很大程度影响耗电，另外在开启权限的情况下，读取的是10秒内使用情况，所以10s后，如果应用没有切换，读取到的是null，而目前逻辑，没有判null，一直抛出NullPointerException，耗电量也会大大增加

统计的上传`ScheduleService.startScheduleService(this)`，会导致某时间点电量大幅消耗，需要排查下统计上传时机，或者只在主进程调用

半小时亮屏：

半小时暗屏幕：

### 暗屏
